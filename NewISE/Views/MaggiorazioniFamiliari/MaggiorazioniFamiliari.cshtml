@model NewISE.Models.DBModel.MaggiorazioniFamiliariModel

@{
    decimal idTrasferimento = Convert.ToDecimal(ViewBag.idTrasferimento);
    bool callConiuge = Convert.ToBoolean(ViewData["callConiuge"]);

    decimal idMafFam = Model.idMaggiorazioneFamiliari;

}


<div class="row">
    <div class="col-xs-12" style="padding-right:20px; margin-left:-10px;">
        <div class="nav nav-tabs nav-justified">
            <ul id="tabsMaggiorazioniFamiliari" class="nav nav-tabs tabs-destro">
                <li id="mnConiuge"><a id="lkConiuge" href="#tabConiuge" data-toggle="tab" onclick="ElencoConiuge();">Coniuge</a></li>
                <li id="mnFigli"><a id="lkFigli" href="#tabFigli" data-toggle="tab" onclick="ElencoFigli();">Figli</a></li>
            </ul>
        </div>
        <div id="tabContenuti" class="tab-content">
            <div class="tab-pane active" id="tabConiuge"></div>
            <div class="tab-pane" id="tabFigli"></div>
        </div>
    </div>
</div>





<script type="text/javascript">
    $('#tabsMaggiorazioniFamiliari').tab();

    @if (callConiuge)
    {
        @:ElencoConiuge();
                                    }
    else
    {
        @:ElencoFigli();
                                    }

    function ElencoConiuge() {
        //debugger;
        var rotta = "/MaggiorazioniFamiliari/ElencoConiuge";
        var idMafFam = parseInt('@idMafFam');

        $.ajax({
            type: "POST",
            url: rotta,
            data: { idMaggiorazioniFamiliari: idMafFam },
            dataType: 'html',
            beforeSend: function () {
                //debugger;
                //VerificaAutenticazione();
                //$("#DialogNewDoc").dialog("destroy");
                //$("#divEffettoLoadAutNoDoc").show("slow");
            },
            success: function (result) {
                //debugger;
                //$("#divEffettoLoadAutNoDoc").hide("slow");
                $("#tabConiuge").empty();
                $("#tabConiuge").html(result);

                //RicercaDocumenti();

            },
            complete: function () {
                //$("#divEffettoLoadAutNoDoc").hide("slow");
                //                $("#Centro").getNiceScroll().resize();
            },
            error: function (jqXHR, textStatus, errorThrow) {
                //debugger;
                var msg = errorThrow.err;
                AlertDialog(msg);
            }

        });

    }

    function ElencoFigli() {
        //debugger;
        var rotta = "/MaggiorazioniFamiliari/ElencoFigli";
        var idTrasferimento = parseInt('@idTrasferimento');

        $.ajax({
            type: "POST",
            url: rotta,
            data: { idTrasferimento: idTrasferimento },
            dataType: 'html',
            beforeSend: function () {
                //debugger;
                //VerificaAutenticazione();
                //$("#DialogNewDoc").dialog("destroy");
                //$("#divEffettoLoadAutNoDoc").show("slow");
            },
            success: function (result) {
                //debugger;
                //$("#divEffettoLoadAutNoDoc").hide("slow");
                $("#tabFigli").empty();
                $("#tabFigli").html(result);

                //RicercaDocumenti();

            },
            complete: function () {
                //$("#divEffettoLoadAutNoDoc").hide("slow");
                //                $("#Centro").getNiceScroll().resize();
            },
            error: function (jqXHR, textStatus, errorThrow) {
                //debugger;
                var msg = errorThrow.err;
                AlertDialog(msg);
            }

        });

    }
</script>