@using NewISE.Models.DBModel
@model IEnumerable<NewISE.Models.DBModel.ViaggioCongedoModel>

@{
   // decimal idViaggioCongedo = Convert.ToDecimal(ViewData["idViaggioCongedo"]);
    //decimal idAttivazioneTitoliViaggio = Convert.ToDecimal(ViewData["idAttivazioneTitoliViaggio"]);
    //bool richiestaEseguita = Convert.ToBoolean(ViewData["richiestaEseguita"]);
    //EnumStatoTraferimento statoTrasferimento = (EnumStatoTraferimento)Convert.ToDecimal(ViewData["statoTrasferimento"]);
    decimal idTrasferimento = Convert.ToDecimal(ViewData["idTrasferimento"]);
    bool admin = Convert.ToBoolean(ViewBag.Amministratore);
    decimal id_Viaggio_Congedo= Convert.ToDecimal(ViewData["id_Viaggio_Congedo"]) ;
    decimal id_Attiv_Viaggio_Congedo = Convert.ToDecimal(ViewData["id_Attiv_Viaggio_Congedo"]);   
}


<p>   
    <hr />
    <div class="row">
        <div class="col-xs-5" style="margin-top:5px;left:10px">
            <table id="tabUploadPreventiviViaggio">
                @Html.Action("ElencoUploadPreventiviViaggiCongedo", "ViaggiCongedo", new { idViaggioCongedo = id_Viaggio_Congedo, idAttivViaggioCongedo= id_Attiv_Viaggio_Congedo, idTrasferimento=idTrasferimento })
            </table>
        </div>
    </div>
    <div  class="row">
            <div id="tabListaPreventiviDiViaggi" class="pull-left" style="margin-top:5px;margin-left:40px;width:1110px">
                <table >
                    @Html.Action("ListaPreventiviDiViaggio", "ViaggiCongedo", new { idViaggioCongedo = id_Viaggio_Congedo, idAttivViaggioCongedo = id_Attiv_Viaggio_Congedo, idTrasferimento = idTrasferimento })
                </table>
            </div>
     </div>

        <div class="row">
            <div id="tabPulsantiPreventiviDiViaggi" style="margin-top:5px;margin-left:40px;width:500px">
                @*<div class="col-md-5" style="margin-top:10px; left:150px">
                    <table id="tabUploadDocumentiViaggiCongedo">
                        @Html.Action("ElencoUploadDocumentiViaggiCongedo", "ViaggiCongedo", new { idViaggioCongedo = id_Viaggio_Congedo, idAttivViaggioCongedo = id_Attiv_Viaggio_Congedo })
                    </table>
                </div>
                <div class="pull-right" style="margin-top: 10px; margin-bottom: 10px;margin-right:35px ">
                    <button class="btn btn-default btn-sm disabled" disabled id="btNotificaPreventiviRichiesta" onclick="ModalNotificaPreventiviRichiesta();">
                        <i aria-hidden="true" class="fa fa-2x fa-envelope"></i>
                        Notifica richiesta
                    </button>

                    <button class="btn btn-default btn-sm disabled" disabled id="btAttivaPreventivi" onclick="ModalAttivaPreventiviRichiesta(); ">
                        <i aria-hidden="true" class="fa fa-2x fa-envelope"></i>
                        Attiva preventivo
                    </button>

                    <button class="btn btn-default btn-sm disabled" disabled id="btAnnullaPreventivi" onclick="ModalAnnullaPreventiviRichiesta();">
                        <i aria-hidden="true" class="fa fa-2x fa-envelope"></i>
                        Annulla richiesta
                    </button>
                </div>*@
                <table>
                    @Html.Action("PulsantiPreventiviDiViaggio", "ViaggiCongedo", new { idViaggioCongedo = id_Viaggio_Congedo, idAttivViaggioCongedo = id_Attiv_Viaggio_Congedo, idTrasferimento = idTrasferimento })
                </table>
            </div>
            </div>
        <script type="text/javascript">

           
            function TabElencoPreventivi() {
                //debugger;
                var rotta = "/ViaggiCongedo/ListaPreventiviDiViaggio";
                var idTrasferimento = @idTrasferimento;
                //   var idTipoDocumento = parseInt($("#hiNuovoDocumento").val());

                $.ajax({
                    url: rotta,
                    type: "POST", //Le info testuali saranno passate in POST
                    data: { idTrasferimento: idTrasferimento },
                    dataType: 'html',
                    async: false,
                    beforeSend: function () {
                        //debugger;
                        VerificaAutenticazione();
                        //$('#inviaDocModal').modal('show');
                      //  Blocca();
                    },
                    success: function (result) {
                        //debugger;
                        $("#tabListaPreventiviDiViaggi").empty();
                        $("#tabListaPreventiviDiViaggi").html(result);
                    },
                    error: function (error) {
                        //debugger;
                   //     Sblocca();
                        var msg = error.responseText;
                        ErroreElaborazioneAjax(msg);
                    }
                });
            }



        </script>


