
<div id="dialog" class="text-center"></div>

<div class="row">
    <div class="col-xs-12">
        <div class="form-group">
            <div class="panel panel-default">
                <div class="panel-heading"><h5><b>Dislocazione dei Dipendenti all'Estero</b></h5></div>
                <div class="panel-body">
                    <h5>
                    <div class="col-xs-4 date">

                        <div class="input-group input-append date">
                            <input type="text" class="form-control" id="data1" />
                            <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                    </div>

                    <div class="col-xs-4 date">
                        <div class="input-group input-append date">
                                @Html.DropDownList("idUfficio", ViewBag.UfficiList as IEnumerable<SelectListItem>, new { @id= "idUfficio", @class = "form-control select2 select2-select" })
                        </div>
                    </div>

                    <div class="col-xs-4 date">
                        <button class="btn btn-small btn-success" id="opener">
                            <i aria-hidden="true" class="fa fa-2x fa-print"></i>
                            Stampa
                        </button>
                    </div>
                    </h5>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

     $(".form-control:input").datepicker();

     var windowWidth = $(window).width();
     var windowHeight = $(window).height();


         $("#dialog").dialog({
             autoOpen: false,
             show: {
                 //effect: "blind",
                 //duration: 1000
             },
             hide: {
                 //effect: "explode",
                 //duration: 1000
             },
             close: function (event, ui) {
                 $('.container').removeClass("NoOverflow");
             },
             height: windowHeight, width: windowWidth


         });

         $("#opener").on("click", function () {
             //debugger;

             $('.container').addClass("NoOverflow");

             $("#dialog").dialog("open");
             $("#dialog").css("background-color", "#ffffff");


             var rotta = "/Statistiche/OpDipEsteroNew/RptOpDipEstero";

             var data1 = $("#data1").datepicker().val()
             var idUfficio = $("#idUfficio").val();

             $.ajax({
                 type: "POST",
                 url: rotta,
                 data: {
                     dtIni: data1,
                     idUfficio: idUfficio
                 },
                 dataType: 'html',
                 beforeSend: function () {
                     //debugger;
                     $("#dialog").empty();

                 },
                 success: function (result) {
                     //debugger;
                     $("#dialog").html(result);


                 },
                 complete: function () {
                     //$("#divEffettoLoadAutNoDoc").hide("slow");
                     //                $("#Centro").getNiceScroll().resize();
                 },
                 error: function (jqXHR, textStatus, errorThrow) {
                     //debugger;
                     var msg = errorThrow.err;
                     AlertDialog(msg);
                 }

             });

         });

         $("#idUfficio").select2({
             placeholder: "Seleziona Ufficio",
             allowClear: true,
             language: "it"
         });

</script>
