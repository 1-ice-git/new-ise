

@*<div class="row">
    <div class="col-xs-12">
        <div>
            @Html.Action("Index", "DipEsteroLivelloNew")
        </div>
    </div>

</div>*@



<div id="dialog" class="text-center"></div>


<div class="row">
    <div class="col-xs-12">
        <div class="form-group">
            <div class="panel panel-default">
                <div class="panel-heading"><b>Dipendenti all'Estero per Livello</b></div>
                <div class="panel-body">

                    <div class="col-xs-3 date">

                        <div class="input-group input-append date">
                            <input type="text" class="form-control" id="data1" />
                            <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                    </div>

                    <div class="col-xs-3 date">

                        <div class="input-group input-append date">
                            <input type="text" class="form-control" id="data2" />
                            <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                    </div>

                    <div class="col-xs-3 date">
                        <div class="input-group input-append date">

                            @Html.DropDownList("idLivello", ViewBag.LivelliList as IEnumerable<SelectListItem>, new { @id = "idLivello", @class = "form-control select2 select2-select" })

                        </div>
                    </div>

                        <div class="col-xs-2 date">
                            <button class="btn btn-small btn-default" id="opener">
                                <i aria-hidden="true" class="fa fa-2x fa-print"></i>

                                Stampa
                            </button>
                        </div>


                        @*<div class="col-md-3">
                <a href="#" onclick="callpartialRptOpIndSedeEstera()">Test </a>

            </div>*@

                    </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

     $(".form-control:input").datepicker();

     var windowWidth = $(window).width();
     var windowHeight = $(window).height();


         $("#dialog").dialog({
             autoOpen: false,
             show: {
                 //effect: "blind",
                 //duration: 1000
             },
             hide: {
                 //effect: "explode",
                 //duration: 1000
             },
             close: function (event, ui) {
                 $('.container').removeClass("NoOverflow");
             },
             height: windowHeight, width: windowWidth


         });

         $("#opener").on("click", function () {
             //debugger;

             $('.container').addClass("NoOverflow");

             $("#dialog").dialog("open");
             $("#dialog").css("background-color", "#ffffff");


             var rotta = "/Statistiche/DipEsteroLivelloNew/RptDipEsteroLivello";

             var data1 = $("#data1").datepicker().val()
             var data2 = $("#data2").datepicker().val()

             var idLivello = $("#idLivello").val();

             $.ajax({
                 type: "POST",
                 url: rotta,
                 data: {
                     dtIni: data1,
                     dtFin: data2,
                     idLivello: idLivello
                 },
                 dataType: 'html',
                 beforeSend: function () {
                     //debugger;
                     $("#dialog").empty();

                 },
                 success: function (result) {
                     //debugger;
                     $("#dialog").html(result);


                 },
                 complete: function () {
                     //$("#divEffettoLoadAutNoDoc").hide("slow");
                     //                $("#Centro").getNiceScroll().resize();
                 },
                 error: function (jqXHR, textStatus, errorThrow) {
                     //debugger;
                     var msg = errorThrow.err;
                     AlertDialog(msg);
                 }

             });

         });


         $("#idLivello").select2({
             placeholder: "Seleziona il Livello",
             allowClear: true,
             width: "150px",
             language: "it"
         });

</script>